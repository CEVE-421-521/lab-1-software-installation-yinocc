<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="CEVE 421/521">

<title>Lab 1: Software Installation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li><li><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 1: Software Installation</h1>
<p class="subtitle lead">Julia, Quarto, GitHub</p>
  <div class="quarto-categories">
    <div class="quarto-category">Lab</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>CEVE 421/521 </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Fri., Jan.&nbsp;12</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="labs" class="level2">
<h2 class="anchored" data-anchor-id="labs">Labs</h2>
<p>Labs are in-class exercises intended to get practice with coding or analysis workflows.</p>
<ul>
<li>Instructions available on website</li>
<li>Download ahead of time by using link from Canvas</li>
<li>You will have your own repository (more in a minute)</li>
<li>Try to finish in class, but due in 1 week</li>
</ul>
</section>
<section id="toolkit-overview" class="level2">
<h2 class="anchored" data-anchor-id="toolkit-overview">Toolkit: overview</h2>
<p>Getting set up for this course requires the following steps. If you are an experienced programmer, you are free to follow your own workflow to set up these tools. You will absolutely need Quarto, GitHub, and Julia. If you are not an experienced programmer, the following steps are not the <em>only</em> way to get these tools set up, but they are a <em>very good</em> way.</p>
<p>If you install course tools using steps other than the ones provided on this page, be aware that your instructors may be able to provide you with only limited support.</p>
<section id="julia" class="level3">
<h3 class="anchored" data-anchor-id="julia">Julia</h3>
<p>We’re using the Julia programming language in this course. Julia is a fast, modern, open-source programming language designed for numerical and scientific computing.</p>
<p>We’re using it for a few key reasons. First, the syntax is human-readable and closely parallels math notation, which reduces the cognitive burden of translating between conceptual and computational models. Second, it’s fast, which means that Julia solves the “two language problem”: you don’t need to learn C or Fortran to dig under the hood and write fast code. Other great features include that it’s open-source, which makes it reproducible and shareable, and it has a fantastic package manager.</p>
<p>There are some great resources out there about why Julia is great. See posts by <a href="https://juliadatascience.io/why_julia">Julia Data Science</a> or the <a href="https://julialang.org/blog/2012/02/why-we-created-julia/">Julia Creators</a> (with <a href="https://www.julialang.org/blog/2022/02/10years/">followup</a>).</p>
</section>
<section id="github" class="level3">
<h3 class="anchored" data-anchor-id="github">GitHub</h3>
<p><code>git</code> is a software tool for version control that keeps track of changes to files over time. GitHub is a website that hosts git repositories and provides a web interface for interacting with them.</p>
<p>To use GitHub, you’ll need a GitHub account. Code on GitHub is stored in <em>repositories</em>. A simple workflow is to <code>clone</code> a repository to your computer, make changes, <code>commit</code> them, then <code>push</code> your changes to GitHub.</p>
<p>We will also use GitHub classroom, which allows instructors to share templates and view your code.</p>
</section>
<section id="quarto" class="level3">
<h3 class="anchored" data-anchor-id="quarto">Quarto</h3>
<p>Quarto is a tool that allows you to combine text and code and create many types of output. For example, this website is made with Quarto! You will use Quarto to create reports for labs. This lets you keep everything in one place – no more running code, saving a figure to <code>Downloads</code>, copying into Word, then trying to remember where to paste the figure when you update the code.</p>
</section>
<section id="vs-code" class="level3">
<h3 class="anchored" data-anchor-id="vs-code">VS Code</h3>
<p>VS Code is a text editor. If you are an advanced user of another text editor, you can use that instead. However, VS Code is very nearly an officially supported IDE for Julia.</p>
</section>
</section>
<section id="installing-software" class="level2">
<h2 class="anchored" data-anchor-id="installing-software">Installing software</h2>
<section id="install-julia" class="level3">
<h3 class="anchored" data-anchor-id="install-julia">Install Julia</h3>
<p>The best way to install Julia is through the <code>juliaup</code> tool, which will let you easily manage versions in the future and works seamlessly with VS Code. The instructions can be found at the <a href="https://github.com/JuliaLang/juliaup">JuliaUp GitHub repository</a>, but we will summarize them here.</p>
<p>If your computer uses Windows, you can install Juliaup <a href="https://www.microsoft.com/store/apps/9NJNWW8PVKMN">from the Windows Store</a>.</p>
<p>If you have a Mac (or are using Linux), open a terminal (such as the Terminal app) and enter:</p>
<pre class="shell"><code>curl -fsSL https://install.julialang.org | sh</code></pre>
<p>Once you install Juliaup, install Julia version 1.9 by opening a terminal (in MacOS or Linux) or the command line (in Windows) and entering:</p>
<pre class="shell"><code>juliaup add 1.10
juliaup default 1.10</code></pre>
<p>This will install Julia 1.10 and make it the default version, which should maximize package compatibility throughout this course. Going forward, if you want to add new versions or change the default, you can <a href="https://github.com/JuliaLang/juliaup#using-juliaup">follow the Juliaup instructions</a>.</p>
</section>
<section id="install-vs-code" class="level3">
<h3 class="anchored" data-anchor-id="install-vs-code">Install VS Code</h3>
<p>VS Code is as close to an officially supported editor for Julia as you can get. We will follow <a href="https://www.julia-vscode.org/docs/dev/gettingstarted/">this guide for setting up VS Code with Julia</a>.</p>
<div class="callout-info">
<p>You can skip this section if you are an experienced programmer and already have a preferred IDE. Your IDE will likely have instructions for Julia and Quarto setup.</p>
</div>
<p>You can download VS Code <a href="https://code.visualstudio.com/download">here</a>; open the downloaded file to install. Make sure to select the correct version for your operating system. If you have a newish Apple mac (with M1, M2, or M3 chip), make sure to check whether you have an Intel or Apple chip before choosing which version to download. You can also use homebrew or your preferred package manager to install VS Code.</p>
<section id="vs-code-julia-extension" class="level4">
<h4 class="anchored" data-anchor-id="vs-code-julia-extension">VS Code Julia Extension</h4>
<p>Like many IDEs, VS Code is a modular system that can be extended with plugins. We will install the Julia extension, which will allow us to run Julia code and interact with the Julia REPL from within VS Code (we’ll add the Quarto extension later).</p>
<ol type="1">
<li>Open VS Code.</li>
<li>Select View and click Extensions to open the Extension View.</li>
<li>Search for <code>julia</code> in the search box. Click the green install button.</li>
<li>Restart VS Code once the installation is complete. It should automatically find your Julia installation; reach out if not.</li>
</ol>
<p>The Julia VS Code extension offers you some nice features. You can start a REPL (an interactive Julia coding environment) by opening the “Command Palette” (View -&gt; Command Palette, or CTRL/CMD+SHIFT+P) and typing “REPL” to bring up “Julia: Start REPL”. You can also create <code>.jl</code> and <code>.qmd</code> files to write Julia code and execute line by line.</p>
</section>
</section>
<section id="github-1" class="level3">
<h3 class="anchored" data-anchor-id="github-1">GitHub</h3>
<p>See <a href="https://docs.github.com/en/get-started">GitHub official tutorials</a> for more helpful resources and tutorials.</p>
<section id="create-github-account" class="level4">
<h4 class="anchored" data-anchor-id="create-github-account">Create GitHub Account</h4>
<p>If you already have a GitHub account, you can use that for this course and do not need to create a new account. Otherwise, <a href="https://github.com/join">create an account</a>. It doesn’t have to be linked to your Rice email or your NetID.</p>
<p>For labs and projects, you should use the GitHub Classroom link posted on Canvas to “accept” the assignment, which will give you your own GitHub repository for that assignment. The first time you click one of these links, you will need to link your place on the course roster with your GitHub account.</p>
</section>
<section id="github-desktop-optional" class="level4">
<h4 class="anchored" data-anchor-id="github-desktop-optional">GitHub Desktop (Optional)</h4>
<p>You can do everything that you will need to do for this course with GitHub directly through VS Code. The GitHub <a href="https://desktop.github.com/">desktop app</a> is also great, or alternatively you may work directly through the terminal if you have prior experience.</p>
</section>
</section>
<section id="github-copilot-optional" class="level3">
<h3 class="anchored" data-anchor-id="github-copilot-optional">GitHub Copilot (Optional)</h3>
<p>GitHub Copilot is an AI-powered tool that helps you write code. You can install it following instructions <a href="https://github.com/features/copilot">here</a> As described in the <a href="https://docs.github.com/en/copilot/quickstart">quickstart guide</a>, Copilot is free for students. Be sure to review the policy on AI language models in the <a href="/syllabus.qmd">syllabus</a>!</p>
<section id="install-git" class="level4">
<h4 class="anchored" data-anchor-id="install-git">Install Git</h4>
<p><code>git</code> is a version control software that powers GitHub under the hood (<code>git</code> is the version control software, GitHub is an online platform). Based on past experience with the course, <em>you probably already have <code>git</code> installed!</em> If you’re not sure if it’s installed, see instructions <a href="https://github.com/git-guides/install-git">here</a>.</p>
</section>
</section>
<section id="install-quarto" class="level3">
<h3 class="anchored" data-anchor-id="install-quarto">Install Quarto</h3>
<p>Quarto combines the best of Jupyter notebooks and R Markdown to create a document format that is ideal for conducting and communicating data science. We will use Quarto to create and share our work in this course; this website is also built using Quarto.||</p>
<p>Follow the <a href="https://quarto.org/docs/get-started/">documentation</a> to install Quarto. Be sure to ensure that you have the right version for your operating system.</p>
<section id="install-the-quarto-extension-for-vs-code" class="level4">
<h4 class="anchored" data-anchor-id="install-the-quarto-extension-for-vs-code">Install the Quarto Extension for VS Code</h4>
<p>Under “Step 2”, click on the VS Code icon.</p>
</section>
<section id="install-jupyter" class="level4">
<h4 class="anchored" data-anchor-id="install-jupyter">Install Jupyter</h4>
<p>Under the hood, Quarto uses Jupyter to run code. You don’t need to know how Jupyter works or worry about it, because it runs under the hood, but we will need to install it. Jupyter is a Python package.</p>
<p>If you don’t have Python installed (if you’re not sure, you should install Miniconda below), you’ll need to install it. The best way, by far, is to install Miniconda (see <a href="https://docs.conda.io/en/latest/miniconda.html">Conda</a> documentation).</p>
<p>Once you have Python installed, you can open your <a href="https://code.visualstudio.com/docs/terminal/basics">Terminal</a> (open VS Code then open the terminal), then run</p>
<pre class="shell"><code>python3 -m pip install jupyter</code></pre>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Based on past experience, getting Jupyter installed and Quarto to find your Jupyter installation is the most common source of problems, especially on Windows machines. Please start this early so you have a full week to get help if you need it.</p>
</div>
</div>
</section>
</section>
</section>
<section id="lab-instructions" class="level2">
<h2 class="anchored" data-anchor-id="lab-instructions">Lab Instructions</h2>
<p>Once you have everything set up, your lab for the week will be to complete the following steps. These will ensure that your installation is working smoothly!</p>
<ol type="1">
<li>Follow the link to lab 1 assignment from Canvas (it should start with <code>classroom.github.com</code>). You will get a message saying ” Your assignment repository has been created: …“. Click on the link to go to your repository.</li>
<li><code>clone</code> the repository for lab 01 (use the Github Classroom link from Canvas) to your computer. You can use VS Code functionality, GitHub Desktop, or your terminal.</li>
<li>Open the directory containing the repository in VS Code doing one of the following:
<ol type="1">
<li>From GitHub desktop: <code>Repository &gt; Open in Visual Studio Code</code></li>
<li>In VS Code: <code>File &gt; Open Folder...</code></li>
</ol></li>
<li>Open the <code>index.qmd</code> file in VS Code and replace the <code>author: CEVE 421/521</code> line with your name and netID</li>
<li>Open the JULIA Repl
<ol type="1">
<li>Open the <em>command palette</em> (Ctrl+Shift+P on Windows/Linux, Cmd+Shift+P on Mac)</li>
<li>Start typing “Julia: Start REPL”. It will auto-complete; select the command as it appears.</li>
</ol></li>
<li>Set up your project environment.
<ol type="1">
<li>In the Julia REPL, type <code>]</code> to enter the package manager. It should now show something like <code>(lab-01) pkg&gt;</code>.</li>
<li>Type <code>instantiate</code> and run it (<code>Enter</code>). This will install all the packages needed for this lab.</li>
<li>Type the backspace key to exit the package manager.</li>
</ol></li>
<li>Edit the <code>index.qmd</code> file to add your name and netID</li>
<li>Render the document
<ol type="1">
<li>Open the <code>index.qmd</code> file</li>
<li>Open the <em>command palette</em> and run “Quarto: Preview”. After some activity, a preview of the rendered document should open in VS Code. If you see something like <code>Browse at http://localhost:4200/index.html</code> you can open that link in your web browser to see the rendered document.</li>
<li>Render to PDF or Microsoft Word following the directions below.</li>
</ol></li>
<li>If you’re still having trouble:
<ol type="1">
<li>Try running <code>build IJulia</code> in the Julia REPL’s Pkg mode (type <code>]</code>)</li>
<li>Come to office hours</li>
<li>Post on the Canvas discussion for Lab 1</li>
</ol></li>
<li><code>commit</code> and <code>push</code> your changes to GitHub</li>
<li>Submit your rendered <code>.docx</code> or <code>.pdf</code> file to Canvas</li>
</ol>
<section id="running-code" class="level3">
<h3 class="anchored" data-anchor-id="running-code">Running Code</h3>
<p>We can use Quarto to run Julia code in-line</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">println</span>(<span class="st">"I'm using Julia!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I'm using Julia!</code></pre>
</div>
</div>
<p>We can also load packages</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CairoMakie</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">LaTeXStrings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and use them to make plots</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="fu">Figure</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> <span class="fu">Axis</span>(f[<span class="fl">1</span>, <span class="fl">1</span>]; title<span class="op">=</span>L<span class="st">"</span><span class="sc">$</span>y<span class="st"> = \sin(x)</span><span class="sc">$</span><span class="st">", </span>xlabel<span class="st">=L"</span><span class="op">$</span>x<span class="op">$</span><span class="st">", ylabel=L"</span><span class="op">$</span>y<span class="op">$</span><span class="st">")</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="fu">range</span>(<span class="fl">0</span>, <span class="fl">10</span>; length<span class="op">=</span><span class="fl">100</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="fu">sin</span>.(x)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines!</span>(ax, x, y)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>f</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<p><img src="index_files/figure-html/cell-4-output-1.svg" class="img-fluid"></p>
</div>
</div>
</section>
<section id="rendering-the-document" class="level3">
<h3 class="anchored" data-anchor-id="rendering-the-document">Rendering the Document</h3>
<p>A Quarto document is a plain text file that uses a simple code language to embed text, math, code, and the code’s output. You can run the document line by line, or you can render to a variety of formats. This is helpful for sharing with others, or for creating a final document for yourself.</p>
<p>We will check our ability to</p>
<ol type="1">
<li><em>Preview</em> the document in HTML (a web-native format)</li>
<li><em>Render</em> the document to PDF or Microsoft Word (a portable, shareable, and printable format)</li>
</ol>
<section id="html" class="level4">
<h4 class="anchored" data-anchor-id="html">HTML</h4>
<p>First, verify that you can preview the document in HTML:</p>
<ol type="1">
<li>Open the command palette (Cmd+Shift+P on macOS, Ctrl+Shift+P on Windows/Linux)</li>
<li>Type “Quarto: Preview”</li>
</ol>
</section>
<section id="pdf" class="level4">
<h4 class="anchored" data-anchor-id="pdf">PDF</h4>
<p>You can use Quarto to generate PDF documents. Follow the instructions <a href="https://quarto.org/docs/output-formats/pdf-basics.html">on Quarto’s website</a> to install the necessary software.</p>
<ol type="1">
<li>To instruct Quarto to render to PDF, you need to edit the document metadata. Specifically, uncomment the lines in the document metadata corresponding to the PDF format.</li>
<li>Open the command palette (Cmd+Shift+P on macOS, Ctrl+Shift+P on Windows/Linux)</li>
<li>Type “Quarto: Render”</li>
</ol>
</section>
<section id="word" class="level4">
<h4 class="anchored" data-anchor-id="word">Word</h4>
<p>You can also render the document to Microsoft Word. See the <a href="https://quarto.org/docs/output-formats/ms-word.html">Quarto documentation</a>.</p>
<ol type="1">
<li>To instruct Quarto to render to Word, you need to edit the document metadata. Specifically, uncomment the lines in the document metadata corresponding to the Word format.</li>
<li>Open the command palette (Cmd+Shift+P on macOS, Ctrl+Shift+P on Windows/Linux)</li>
<li>Type “Quarto: Render”</li>
</ol>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>